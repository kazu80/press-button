<!--<link rel="import" href="../polymer/polymer-element.html">-->
<link rel="import" href="bower_components/polymer/polymer-element.html">
<link rel="import" href="bower_components/polymer/lib/elements/dom-if.html">

<script src="bower_components/hammerjs/hammer.min.js"></script>

<link rel="import" href="bower_components/paper-button/paper-button.html">
<link rel="import" href="./svg-loading.html">

<dom-module id="indicator-button">
    <template>
        <style>
            :host {
            }

            .press-button-wrapper {
                display : inline-block;
            }
        </style>

        <div class="press-button-wrapper">
            <svg-loading press="{{isPress}}"></svg-loading>
            <paper-button id="indicator-button" raised class="indigo">Button</paper-button>
        </div>

    </template>

    <script>
        /**
         * `indicator-button`
         *
         *
         * @customElement
         * @polymer
         * @demo demo/index.html
         */
        class IndicatorButton extends Polymer.Element {
            static get is () { return 'indicator-button'; }

            /**
             * properties
             * @returns {{prop1: {type: StringConstructor, value: string}}}
             */
            static get properties () {
                return {
                    prop1: {
                        type : String,
                        value: 'indicator-button'
                    }
                };
            }

            constructor () {
                super ();

                this.isPress = false;
            }

            ready () {
                super.ready ();

                const button = this.shadowRoot.querySelector ('#indicator-button');

                const hammerButton = new Hammer (button, {});

                hammerButton.on ('press', (event) => {
                    this.isPress = true;
                });

                hammerButton.on ('pressup', (event) => {
                    this.isPress = false;
                });

                const loading = this.shadowRoot.querySelector ('svg-loading');

                loading.addEventListener ('animationEnd', (event) => {
                    // 200ms後にLoadingを消す
                    setTimeout (() => this.isPress = false, 200);
                });
            }
        }

        window.customElements.define (IndicatorButton.is, IndicatorButton);
    </script>
</dom-module>
